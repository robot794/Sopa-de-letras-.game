<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Digital Fracture: Soap of Letters Game</title>
  <style>
    body {
      margin: 0;
      font-family: monospace;
      background: #111;
      color: #0ff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }

    #game {
      display: grid;
      grid-template-columns: repeat(13, 2rem);
      gap: 0.2rem;
      margin: 2rem 0;
    }

    .cell {
      width: 2rem;
      height: 2rem;
      background: #222;
      color: #0ff;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 1px solid #0ff;
      cursor: pointer;
      user-select: none;
    }

    .found {
      background: #0f0;
      color: #000;
      font-weight: bold;
    }

    #words {
      margin-bottom: 1rem;
    }

    #message {
      font-size: 1.2rem;
      margin-top: 1rem;
      height: 2rem;
    }
  </style>
</head>
<body>
  <h1>Digital Fracture: Soap of Letters Game</h1>
  <div id="words">Find: CHEESE, BROCCOLI, PUMPKIN, WATERMELON, ACORN</div>
  <div id="game"></div>
  <div id="message"></div>
  <audio id="bgm" src="CREATION_OF_HATRED.mp3" loop autoplay></audio>
  <script>
    const grid = [
      "CHEESEPOPLE",
      "HNCIESAFREC",
      "IWYOGHURIEL",
      "KATRSEPAOCL",
      "ETOCAMKILNPN",
      "NCRHITLGOAM",
      "MHRHMEIGRAE",
      "IWATERMELONA",
      "LLCEACORNHIL",
      "LOSWTEATSAPT",
      "EABROCCOLIEH",
      "TRPUMPKINIRT"
    ];

    const words = ["CHEESE", "BROCCOLI", "PUMPKIN", "WATERMELON", "ACORN"];
    let foundWords = [];

    const game = document.getElementById("game");
    const message = document.getElementById("message");

    function createGrid() {
      game.innerHTML = "";
      for (let row = 0; row < grid.length; row++) {
        for (let col = 0; col < grid[row].length; col++) {
          const cell = document.createElement("div");
          cell.classList.add("cell");
          cell.textContent = grid[row][col];
          cell.dataset.row = row;
          cell.dataset.col = col;
          game.appendChild(cell);
        }
      }
    }

    function markWord(word) {
      const letters = document.querySelectorAll(".cell");
      letters.forEach(cell => {
        if (cell.textContent === word[0]) {
          const startRow = parseInt(cell.dataset.row);
          const startCol = parseInt(cell.dataset.col);
          // Try horizontal match
          const candidate = grid[startRow].slice(startCol, startCol + word.length);
          if (candidate === word) {
            for (let i = 0; i < word.length; i++) {
              const idx = startRow * grid[0].length + startCol + i;
              letters[idx].classList.add("found");
            }
            return true;
          }
        }
      });
      return false;
    }

    function checkWords() {
      words.forEach(word => {
        if (!foundWords.includes(word) && markWord(word)) {
          foundWords.push(word);
          message.textContent = `Good job! You found ${word}!`;
          showPaperDollAttack();
          setTimeout(() => (message.textContent = ""), 2000);
        }
      });

      if (foundWords.length === words.length) {
        message.textContent = "You win! UNNAMELESS CORRUPTOR defeated!";
      }
    }

    function showPaperDollAttack() {
      const paper = document.createElement("div");
      paper.textContent = "(╯°□°）╯︵ ┻━┻ -> 0uch... s7Op...";
      paper.style.position = "fixed";
      paper.style.bottom = "2rem";
      paper.style.left = "50%";
      paper.style.transform = "translateX(-50%)";
      paper.style.background = "#f00";
      paper.style.color = "#fff";
      paper.style.padding = "0.5rem 1rem";
      paper.style.zIndex = 999;
      paper.style.fontSize = "1rem";
      paper.style.borderRadius = "5px";
      document.body.appendChild(paper);
      setTimeout(() => paper.remove(), 3000);
    }

    function scrambleGrid() {
      const letters = document.querySelectorAll(".cell");
      letters.forEach(cell => {
        if (Math.random() < 0.05) {
          cell.textContent = String.fromCharCode(65 + Math.floor(Math.random() * 26));
        }
        if (Math.random() < 0.05) {
          cell.style.transform = "rotate(180deg)";
        }
      });
    }

    setInterval(() => {
      scrambleGrid();
    }, 50000);

    createGrid();
    setInterval(checkWords, 3000);
  </script>
</body>
</html>
